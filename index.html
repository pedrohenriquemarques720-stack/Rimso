<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RIMSO ¬∑ Lojas do bairro</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Leaflet para o mapa -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background: #e5e5e3;
            min-height: 100vh;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 24px 16px;
        }

        .rimso-app {
            max-width: 1280px;
            width: 100%;
            background: #f7f7f5;
            border-radius: 40px 40px 30px 30px;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            border: 1px solid #eaeae6;
        }

        .top-bar {
            background: #ffffff;
            padding: 16px 32px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #efefec;
        }

        .logo-area {
            display: flex;
            align-items: baseline;
            gap: 10px;
        }

        .logo {
            font-size: 30px;
            font-weight: 800;
            letter-spacing: -0.5px;
            color: #121212;
        }

        .logo span {
            background: #d9ffb2;
            padding: 4px 10px 6px 10px;
            border-radius: 60px;
            font-size: 14px;
            font-weight: 600;
            color: #1e3a2f;
            margin-left: 4px;
        }

        .tagline-desk {
            color: #6b6b69;
            font-size: 15px;
            font-weight: 400;
            border-left: 1px solid #d9d9d6;
            padding-left: 20px;
            margin-left: 8px;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-name {
            font-weight: 600;
            color: #2c2c2a;
        }

        .logout-btn {
            background: none;
            border: 1px solid #e0e0dd;
            padding: 8px 16px;
            border-radius: 60px;
            cursor: pointer;
            font-weight: 500;
            background: #f4f4f2;
        }

        .tabs-container {
            display: flex;
            gap: 8px;
            padding: 0 32px;
            background: white;
            border-bottom: 1px solid #efefec;
        }

        .tab {
            padding: 16px 24px;
            font-weight: 600;
            color: #6b6b69;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: 0.1s;
        }

        .tab.active {
            color: #121212;
            border-bottom-color: #121212;
        }

        .content-area {
            padding: 32px;
            background: #f7f7f5;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .parceiros-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }

        .parceiro-card {
            background: white;
            border-radius: 24px;
            padding: 20px;
            border: 1px solid #efefec;
            transition: 0.1s;
        }

        .parceiro-card img {
            width: 80px;
            height: 80px;
            border-radius: 40px;
            background: #f0f0ed;
            margin-bottom: 16px;
            object-fit: cover;
        }

        .func-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .func-item {
            background: white;
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid #efefec;
        }

        .func-item i {
            font-size: 28px;
            color: #1e3a2f;
            margin-bottom: 12px;
        }

        .filtro-local {
            background: white;
            padding: 24px;
            border-radius: 28px;
            margin-bottom: 24px;
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            border: 1px solid #efefec;
        }

        .filtro-local input {
            flex: 1;
            min-width: 250px;
            padding: 16px 24px;
            border: 1.5px solid #e3e3df;
            border-radius: 60px;
            font-size: 15px;
            outline: none;
        }

        .filtro-local input:focus {
            border-color: #121212;
        }

        .filtro-local button {
            background: #121212;
            color: white;
            border: none;
            padding: 16px 36px;
            border-radius: 60px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.1s;
        }

        .filtro-local button:hover {
            background: #2d2d2b;
        }

        #map {
            height: 350px;
            border-radius: 28px;
            margin: 20px 0 30px;
            border: 1px solid #efefec;
            z-index: 1;
        }

        .lojas-lista {
            margin-top: 24px;
        }

        .loja-item {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #efefec;
        }

        .loja-info h3 {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .loja-distancia {
            color: #6b6b69;
            font-size: 14px;
            margin: 4px 0;
        }

        .rating {
            background: #f3f9e6;
            padding: 4px 12px;
            border-radius: 40px;
            font-weight: 600;
            color: #1f4f3d;
            display: inline-block;
        }

        .btn-outline {
            border: 1.8px solid #d0d0cd;
            background: transparent;
            padding: 10px 24px;
            border-radius: 60px;
            font-weight: 600;
            font-size: 14px;
            color: #121212;
            cursor: pointer;
        }

        .btn-outline:hover {
            background: #f4f4f2;
        }

        .faq-item {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 12px;
            border: 1px solid #efefec;
            cursor: pointer;
        }

        .faq-question {
            font-weight: 700;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
        }

        .faq-answer {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #efefec;
            color: #4b4b48;
            display: none;
            line-height: 1.5;
        }

        .faq-item.open .faq-answer {
            display: block;
        }

        .faq-item.open .fa-chevron-down {
            transform: rotate(180deg);
        }

        .contato-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .contato-card {
            background: white;
            border-radius: 28px;
            padding: 40px 30px;
            text-align: center;
            border: 1px solid #efefec;
        }

        .contato-icon {
            font-size: 56px;
            color: #121212;
            margin-bottom: 20px;
        }

        .contato-email, .contato-instagram {
            font-size: 22px;
            font-weight: 700;
            color: #121212;
            text-decoration: none;
            display: block;
            margin-top: 16px;
        }

        .contato-email:hover, .contato-instagram:hover {
            color: #1e3a2f;
        }

        .atendimento-card {
            background: white;
            border-radius: 28px;
            padding: 30px;
            border: 1px solid #efefec;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal {
            background: white;
            border-radius: 40px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal h2 {
            margin-bottom: 24px;
            font-size: 28px;
        }

        .input-group {
            margin-bottom: 18px;
        }

        .input-group label {
            font-weight: 600;
            font-size: 14px;
            color: #4b4b48;
            display: block;
            margin-bottom: 6px;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 16px 20px;
            border: 1.5px solid #e3e3df;
            border-radius: 60px;
            font-size: 15px;
            outline: none;
        }

        .input-group input:focus {
            border-color: #121212;
        }

        .btn-primary {
            background: #121212;
            color: white;
            border: none;
            padding: 18px 32px;
            border-radius: 60px;
            font-weight: 700;
            width: 100%;
            cursor: pointer;
            margin-top: 10px;
            font-size: 16px;
        }

        .btn-secondary {
            background: #f1f1ee;
            color: #121212;
            border: none;
            padding: 18px 32px;
            border-radius: 60px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            margin-top: 10px;
            font-size: 16px;
        }

        .price-tag {
            background: #d9ffb2;
            padding: 8px 20px;
            border-radius: 60px;
            font-weight: 700;
            display: inline-block;
            margin: 10px 0;
        }

        .hidden {
            display: none;
        }

        .divider {
            display: flex;
            gap: 12px;
            margin: 20px 0;
        }

        .success-message {
            background: #d9ffb2;
            color: #1e3a2f;
            padding: 16px;
            border-radius: 16px;
            margin: 20px 0;
            text-align: center;
            font-weight: 600;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #121212;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media screen and (max-width: 768px) {
            .tabs-container {
                padding: 0 16px;
                overflow-x: auto;
            }
            .tab {
                padding: 16px 16px;
                white-space: nowrap;
            }
            .content-area {
                padding: 20px 16px;
            }
            .contato-container {
                grid-template-columns: 1fr;
            }
            .func-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
<div class="rimso-app">
    <!-- Barra superior -->
    <div class="top-bar">
        <div class="logo-area">
            <div class="logo">RIMSO <span>beta</span></div>
            <div class="tagline-desk">Conectando suas lojas ao seu bairro</div>
        </div>
        <div class="user-menu">
            <span class="user-name" id="userNameDisplay"><i class="far fa-user"></i> Visitante</span>
            <button class="logout-btn" id="entrarBtn">Entrar</button>
        </div>
    </div>

    <!-- 4 Abas no topo -->
    <div class="tabs-container" id="tabs">
        <div class="tab active" onclick="showTab('inicio')">In√≠cio</div>
        <div class="tab" onclick="showTab('descubra')">Descubra lojas</div>
        <div class="tab" onclick="showTab('faq')">FAQ</div>
        <div class="tab" onclick="showTab('contato')">Contato</div>
    </div>

    <!-- √Årea de conte√∫do -->
    <div class="content-area">
        <!-- ABA IN√çCIO -->
        <div id="tab-inicio" class="tab-content active">
            <h1 style="font-size: 32px; margin-bottom: 8px;" id="welcomeMessage">Ol√°, visitante!</h1>
            <p style="color: #6b6b69; margin-bottom: 30px;">Descubra lojas parceiras perto de voc√™</p>
            
            <h2>Nossos parceiros</h2>
            <div class="parceiros-grid">
                <div class="parceiro-card">
                    <img src="https://via.placeholder.com/150/1e3a2f/ffffff?text=UB" alt="UrbanStyle">
                    <h3>UrbanStyle</h3>
                    <p style="color: #6b6b69;">Moda urbana e streetwear</p>
                    <button class="btn-outline" style="margin-top: 16px;" onclick="showTab('descubra')">Ver loja</button>
                </div>
                <div class="parceiro-card">
                    <img src="https://via.placeholder.com/150/121212/ffffff?text=SW" alt="StreetWearBR">
                    <h3>StreetWearBR</h3>
                    <p style="color: #6b6b69;">As melhores marcas de rua</p>
                    <button class="btn-outline" style="margin-top: 16px;" onclick="showTab('descubra')">Ver loja</button>
                </div>
                <div class="parceiro-card">
                    <img src="https://via.placeholder.com/150/4b4b48/ffffff?text=SI" alt="Sioostas">
                    <h3>Sioostas</h3>
                    <p style="color: #6b6b69;">Estilo aut√™ntico</p>
                    <button class="btn-outline" style="margin-top: 16px;" onclick="showTab('descubra')">Ver loja</button>
                </div>
                <div class="parceiro-card">
                    <img src="https://via.placeholder.com/150/d9ffb2/121212?text=BM" alt="Bairro Modas">
                    <h3>Bairro Modas</h3>
                    <p style="color: #6b6b69;">Moda casual</p>
                    <button class="btn-outline" style="margin-top: 16px;" onclick="showTab('descubra')">Ver loja</button>
                </div>
            </div>
            
            <div style="margin-top: 40px; background: #f8f8f6; border-radius: 28px; padding: 30px;">
                <h2>Funcionalidades do app</h2>
                <div class="func-grid">
                    <div class="func-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <h3>Lojas pr√≥ximas</h3>
                        <p style="color: #6b6b69;">Encontre lojas no seu bairro</p>
                    </div>
                    <div class="func-item">
                        <i class="fas fa-tags"></i>
                        <h3>Ofertas exclusivas</h3>
                        <p style="color: #6b6b69;">Descontos especiais</p>
                    </div>
                    <div class="func-item">
                        <i class="fas fa-credit-card"></i>
                        <h3>Pagamento f√°cil</h3>
                        <p style="color: #6b6b69;">Taxa √∫nica de R$20 para lojas</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA DESCOBRIR LOJAS -->
        <div id="tab-descubra" class="tab-content">
            <h2>Descubra lojas perto de voc√™</h2>
            
            <div class="filtro-local">
                <input type="text" id="localizacao-input" placeholder="Digite cidade, bairro ou rua (ex: Piracicaba, S√£o Paulo)" value="Piracicaba - S√£o Paulo">
                <button onclick="buscarLojas()" id="buscarBtn"><i class="fas fa-search"></i> Buscar</button>
            </div>
            
            <div id="map"></div>
            
            <div class="lojas-lista" id="lojas-lista">
                <h3 style="margin-bottom: 16px;">Lojas encontradas</h3>
                
                <div class="loja-item" id="loja1">
                    <div class="loja-info">
                        <h3>StreetWearBR</h3>
                        <div class="loja-distancia"><i class="fas fa-map-pin"></i> Rua da Consola√ß√£o, 123 - Pinheiros</div>
                        <span class="rating">4.5 ‚≠ê</span>
                    </div>
                    <button class="btn-outline">Ver loja</button>
                </div>
                
                <div class="loja-item" id="loja2">
                    <div class="loja-info">
                        <h3>UrbanStyle</h3>
                        <div class="loja-distancia"><i class="fas fa-map-pin"></i> Av. Faria Lima, 1500 - Pinheiros</div>
                        <span class="rating">4.8 ‚≠ê</span>
                    </div>
                    <button class="btn-outline">Ver loja</button>
                </div>
                
                <div class="loja-item" id="loja3">
                    <div class="loja-info">
                        <h3>Sioostas</h3>
                        <div class="loja-distancia"><i class="fas fa-map-pin"></i> Rua dos Pinheiros, 350 - Pinheiros</div>
                        <span class="rating">4.3 ‚≠ê</span>
                    </div>
                    <button class="btn-outline">Ver loja</button>
                </div>
            </div>
        </div>

        <!-- ABA FAQ -->
        <div id="tab-faq" class="tab-content">
            <h2>Perguntas frequentes</h2>
            <div style="margin-top: 24px;">
                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        Como fa√ßo para me cadastrar como cliente?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        √â gratuito e r√°pido! Basta clicar em "Entrar" no canto superior direito, escolher "Sou Cliente", preencher seus dados e clicar em "Cadastrar gr√°tis". Pronto! Voc√™ j√° pode explorar as lojas pr√≥ximas.
                    </div>
                </div>
                
                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        Quanto custa cadastrar minha loja no RIMSO?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        O cadastro para lojistas tem uma taxa √∫nica de R$20,00. Com isso sua loja aparece para clientes no seu bairro e regi√£o, com acesso a todas as funcionalidades da plataforma.
                    </div>
                </div>
                
                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        Como funciona a localiza√ß√£o das lojas?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Usamos sua localiza√ß√£o atual (com sua permiss√£o) ou o filtro de busca para mostrar as lojas mais pr√≥ximas. Voc√™ pode buscar por cidade, bairro ou rua no campo de busca da aba "Descubra lojas" e o mapa ser√° atualizado automaticamente para a localiza√ß√£o pesquisada.
                    </div>
                </div>
                
                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        Posso comprar direto pelo app?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        No momento voc√™ encontra as lojas e v√™ os produtos, mas as compras s√£o redirecionadas para o contato da loja (WhatsApp ou Instagram). Em breve teremos checkout integrado.
                    </div>
                </div>
                
                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        Como atualizar os dados da minha loja?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Acesse sua conta de lojista (clicando em "Entrar" e depois "Sou Lojista") e fa√ßa login. Ap√≥s logado, aparecer√° a op√ß√£o "Meu Perfil" onde voc√™ pode editar informa√ß√µes como endere√ßo, categoria e produtos.
                    </div>
                </div>
                
                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        O pagamento da taxa √© seguro?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Sim! Utilizamos integra√ß√£o com gateways de pagamento. Por enquanto √© uma simula√ß√£o, mas em breve teremos pagamento real via Pix e cart√£o com toda seguran√ßa.
                    </div>
                </div>
                
                <div class="faq-item" onclick="toggleFaq(this)">
                    <div class="faq-question">
                        Quais cidades est√£o dispon√≠veis?
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        Come√ßamos por S√£o Paulo (capital e grande SP), mas estamos expandindo. Em breve todo estado de S√£o Paulo ter√° cobertura. Fique de olho nas novidades!
                    </div>
                </div>
            </div>
        </div>

        <!-- ABA CONTATO -->
        <div id="tab-contato" class="tab-content">
            <h2>Fale com a gente</h2>
            <div class="contato-container">
                <div class="contato-card">
                    <div class="contato-icon"><i class="far fa-envelope"></i></div>
                    <h3>E-mail</h3>
                    <a href="mailto:contato@rimso.com.br" class="contato-email">contato@rimso.com.br</a>
                    <p style="color: #6b6b69; margin-top: 12px;">Respondemos em at√© 24h</p>
                </div>
                
                <div class="contato-card">
                    <div class="contato-icon"><i class="fab fa-instagram"></i></div>
                    <h3>Instagram</h3>
                    <a href="https://instagram.com/rimsoapp" target="_blank" class="contato-instagram">@rimsoapp</a>
                    <p style="color: #6b6b69; margin-top: 12px;">Siga para novidades e promo√ß√µes</p>
                </div>
            </div>
            
            <div class="atendimento-card">
                <h3><i class="far fa-clock"></i> Hor√°rio de atendimento</h3>
                <p style="margin-top: 16px; font-size: 18px;">Segunda a sexta: 9h √†s 18h<br>S√°bado: 9h √†s 13h</p>
                <p style="color: #6b6b69; margin-top: 12px;">Estamos sempre prontos para ajudar!</p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div style="background: #fcfcfb; padding: 16px 32px; border-top: 1px solid #efefec; display: flex; justify-content: space-between; font-size: 14px; color:#6f6f6c;">
        <span><i class="fa-regular fa-clock"></i> Lojas abertas agora</span>
        <span>RIMSO ‚Ä¢ cadastro loja R$20 <i class="fa-regular fa-credit-card"></i></span>
    </div>
</div>

<!-- Modal de Cadastro/Login -->
<div id="modalCadastro" class="modal-overlay">
    <div class="modal">
        <div style="text-align: right;"><i class="fas fa-times" style="cursor: pointer; font-size: 24px;" onclick="fecharModal()"></i></div>
        <div class="logo" style="text-align: center; margin-bottom: 20px;">RIMSO <span>beta</span></div>
        <h2 style="text-align: center;">Bem-vindo!</h2>
        
        <div id="mensagemSucesso" class="success-message hidden">
            Cadastro realizado com sucesso!
        </div>
        
        <div class="divider">
            <button class="btn-secondary" onclick="showForm('pf')">Sou Cliente</button>
            <button class="btn-primary" onclick="showForm('pj')">Sou Lojista</button>
        </div>
        
        <!-- Formul√°rio PF -->
        <div id="form-pf">
            <h3 style="margin-bottom: 20px;">Cadastro Cliente (gr√°tis)</h3>
            <div class="input-group"><label>Nome completo</label><input type="text" id="pfNome" placeholder="Seu nome" value="Ana Oliveira"></div>
            <div class="input-group"><label>Email</label><input type="email" id="pfEmail" value="ana@email.com"></div>
            <div class="input-group"><label>Senha</label><input type="password" id="pfSenha" value="123456"></div>
            <div class="input-group"><label>Cidade</label><input type="text" id="pfCidade" value="S√£o Paulo"></div>
            <div class="input-group"><label>Bairro</label><input type="text" id="pfBairro" value="Pinheiros"></div>
            <button class="btn-primary" onclick="cadastrarPF()">Cadastrar gr√°tis</button>
            
            <p style="text-align: center; margin: 20px 0 10px;">J√° tem conta? Fa√ßa login</p>
            <div class="input-group"><label>Email</label><input type="email" id="loginEmail" value="ana@email.com"></div>
            <div class="input-group"><label>Senha</label><input type="password" id="loginSenha" value="123456"></div>
            <button class="btn-secondary" onclick="fazerLogin()">Entrar</button>
        </div>
        
        <!-- Formul√°rio PJ -->
        <div id="form-pj" class="hidden">
            <h3 style="margin-bottom: 20px;">Cadastro Lojista</h3>
            <div class="price-tag"><i class="fa-solid fa-brazilian-real-sign"></i> Taxa √∫nica R$20</div>
            <div class="input-group"><label>Nome da Loja</label><input type="text" id="lojaNome" value="StreetWearBR"></div>
            <div class="input-group"><label>Email</label><input type="email" id="lojaEmail" value="loja@street.com"></div>
            <div class="input-group"><label>Senha</label><input type="password" id="lojaSenha" value="123456"></div>
            <div class="input-group"><label>Cidade</label><input type="text" id="lojaCidade" value="S√£o Paulo"></div>
            <div class="input-group"><label>Bairro</label><input type="text" id="lojaBairro" value="Pinheiros"></div>
            <div class="input-group"><label>Categoria</label>
                <select id="lojaCategoria">
                    <option>Streetwear</option>
                    <option>Sportwear</option>
                    <option>Casual</option>
                    <option>Moda feminina</option>
                    <option>Moda masculina</option>
                </select>
            </div>
            <button class="btn-primary" onclick="cadastrarLoja()"><i class="fa-regular fa-credit-card"></i> Pagar R$20 e cadastrar</button>
            
            <p style="text-align: center; margin: 20px 0 10px;">J√° tem loja? Login</p>
            <div class="input-group"><label>Email</label><input type="email" id="loginLojaEmail" value="loja@street.com"></div>
            <div class="input-group"><label>Senha</label><input type="password" id="loginLojaSenha" value="123456"></div>
            <button class="btn-secondary" onclick="fazerLoginLoja()">Entrar como lojista</button>
        </div>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // Vari√°veis globais
    let map;
    let userLogado = false;
    let userName = '';
    let userTipo = '';
    let markers = [];
    
    // Coordenadas padr√£o (S√£o Paulo)
    const defaultLat = -23.5505;
    const defaultLng = -46.6333;
    
    // Lojas de exemplo (ser√£o reposicionadas conforme a busca)
    let lojas = [
        { nome: 'StreetWearBR', lat: -23.5605, lng: -46.6433, end: 'Rua da Consola√ß√£o, 123', rating: 4.5 },
        { nome: 'UrbanStyle', lat: -23.5705, lng: -46.6533, end: 'Av. Faria Lima, 1500', rating: 4.8 },
        { nome: 'Sioostas', lat: -23.5505, lng: -46.6233, end: 'Rua dos Pinheiros, 350', rating: 4.3 }
    ];

    // Controle de abas
    function showTab(tabName) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
        document.getElementById('tab-' + tabName).classList.add('active');
        
        const tabs = document.querySelectorAll('.tab');
        for (let i = 0; i < tabs.length; i++) {
            if (tabs[i].innerText.toLowerCase().includes(tabName)) {
                tabs[i].classList.add('active');
            }
        }
        
        if (tabName === 'descubra') {
            setTimeout(initMap, 100);
        }
    }
    
    // FAQ toggle
    function toggleFaq(element) {
        element.classList.toggle('open');
    }
    
    // Modal
    document.getElementById('entrarBtn').addEventListener('click', function(e) {
        if (userLogado) {
            // Logout
            userLogado = false;
            userName = '';
            userTipo = '';
            document.getElementById('userNameDisplay').innerHTML = '<i class="far fa-user"></i> Visitante';
            document.getElementById('welcomeMessage').innerHTML = 'Ol√°, visitante!';
            this.innerHTML = 'Entrar';
        } else {
            // Abrir modal de login
            document.getElementById('modalCadastro').style.display = 'flex';
        }
    });
    
    function fecharModal() {
        document.getElementById('modalCadastro').style.display = 'none';
    }
    
    function showForm(tipo) {
        document.getElementById('form-pf').classList.add('hidden');
        document.getElementById('form-pj').classList.add('hidden');
        if (tipo === 'pf') {
            document.getElementById('form-pf').classList.remove('hidden');
        } else {
            document.getElementById('form-pj').classList.remove('hidden');
        }
    }
    
    // Fun√ß√µes de cadastro
    function cadastrarPF() {
        const nome = document.getElementById('pfNome').value;
        
        userLogado = true;
        userName = nome;
        userTipo = 'pf';
        
        document.getElementById('userNameDisplay').innerHTML = `<i class="far fa-user"></i> ${nome}`;
        document.getElementById('welcomeMessage').innerHTML = `Ol√°, ${nome}!`;
        document.getElementById('entrarBtn').innerHTML = 'Sair';
        
        document.getElementById('mensagemSucesso').classList.remove('hidden');
        setTimeout(() => {
            fecharModal();
        }, 1500);
    }
    
    function cadastrarLoja() {
        const nome = document.getElementById('lojaNome').value;
        
        userLogado = true;
        userName = nome;
        userTipo = 'pj';
        
        document.getElementById('userNameDisplay').innerHTML = `<i class="fas fa-store"></i> ${nome}`;
        document.getElementById('welcomeMessage').innerHTML = `Ol√°, ${nome}!`;
        document.getElementById('entrarBtn').innerHTML = 'Sair';
        
        document.getElementById('mensagemSucesso').classList.remove('hidden');
        setTimeout(() => {
            fecharModal();
        }, 1500);
    }
    
    function fazerLogin() {
        userLogado = true;
        userName = 'Ana Oliveira';
        userTipo = 'pf';
        
        document.getElementById('userNameDisplay').innerHTML = `<i class="far fa-user"></i> Ana Oliveira`;
        document.getElementById('welcomeMessage').innerHTML = `Ol√°, Ana Oliveira!`;
        document.getElementById('entrarBtn').innerHTML = 'Sair';
        
        fecharModal();
    }
    
    function fazerLoginLoja() {
        userLogado = true;
        userName = 'StreetWearBR';
        userTipo = 'pj';
        
        document.getElementById('userNameDisplay').innerHTML = `<i class="fas fa-store"></i> StreetWearBR`;
        document.getElementById('welcomeMessage').innerHTML = `Ol√°, StreetWearBR!`;
        document.getElementById('entrarBtn').innerHTML = 'Sair';
        
        fecharModal();
    }
    
    // Mapa
    function initMap() {
        if (map) {
            map.remove();
        }
        
        map = L.map('map').setView([defaultLat, defaultLng], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap'
        }).addTo(map);
        
        // Limpar markers antigos
        if (markers.length > 0) {
            markers.forEach(m => map.removeLayer(m));
            markers = [];
        }
        
        // Adicionar marcadores
        adicionarMarcadores();
    }
    
    function adicionarMarcadores() {
        lojas.forEach(loja => {
            const marker = L.marker([loja.lat, loja.lng])
                .addTo(map)
                .bindPopup(`<b>${loja.nome}</b><br>${loja.end}<br>‚≠ê ${loja.rating}`);
            markers.push(marker);
        });
    }
    
    // Buscar lojas por localiza√ß√£o usando Nominatim (OpenStreetMap)
    async function buscarLojas() {
        const local = document.getElementById('localizacao-input').value;
        const buscarBtn = document.getElementById('buscarBtn');
        
        if (!local) {
            alert('Por favor, digite uma localiza√ß√£o');
            return;
        }
        
        // Mostrar loading
        buscarBtn.innerHTML = '<span class="loading"></span> Buscando...';
        buscarBtn.disabled = true;
        
        try {
            // Geocodifica√ß√£o com Nominatim
            const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(local)}&limit=1&countrycodes=br`);
            const data = await response.json();
            
            if (data && data.length > 0) {
                const lat = parseFloat(data[0].lat);
                const lon = parseFloat(data[0].lon);
                const displayName = data[0].display_name;
                
                // Centralizar mapa na localiza√ß√£o encontrada
                map.setView([lat, lon], 13);
                
                // Reposicionar lojas pr√≥ximas √† nova localiza√ß√£o (simula√ß√£o)
                lojas = lojas.map((loja, index) => {
                    // Criar varia√ß√£o de posi√ß√£o em torno da nova localiza√ß√£o
                    const offsetLat = (index - 1) * 0.01;
                    const offsetLng = index * 0.01;
                    return {
                        ...loja,
                        lat: lat + offsetLat,
                        lng: lon + offsetLng
                    };
                });
                
                // Remover marcadores antigos e adicionar novos
                markers.forEach(m => map.removeLayer(m));
                markers = [];
                adicionarMarcadores();
                
                // Atualizar endere√ßos nas listas
                document.getElementById('loja1').querySelector('.loja-distancia').innerHTML = `<i class="fas fa-map-pin"></i> Pr√≥ximo a ${local}`;
                document.getElementById('loja2').querySelector('.loja-distancia').innerHTML = `<i class="fas fa-map-pin"></i> Pr√≥ximo a ${local}`;
                document.getElementById('loja3').querySelector('.loja-distancia').innerHTML = `<i class="fas fa-map-pin"></i> Pr√≥ximo a ${local}`;
                
                alert(`üìç Localiza√ß√£o encontrada: ${displayName.split(',')[0]}`);
            } else {
                alert('Localiza√ß√£o n√£o encontrada. Tente um nome de cidade ou bairro v√°lido.');
            }
        } catch (error) {
            console.error('Erro na geocodifica√ß√£o:', error);
            alert('Erro ao buscar localiza√ß√£o. Tente novamente.');
        } finally {
            // Restaurar bot√£o
            buscarBtn.innerHTML = '<i class="fas fa-search"></i> Buscar';
            buscarBtn.disabled = false;
        }
    }
    
    // Fechar modal clicando fora
    window.onclick = function(event) {
        const modal = document.getElementById('modalCadastro');
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    }
    
    // Inicializar mapa se necess√°rio
    window.onload = function() {
        if (document.getElementById('tab-descubra').classList.contains('active')) {
            initMap();
        }
    };
</script>
</body>
</html>